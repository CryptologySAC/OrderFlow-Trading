{
    "nodeEnv": "development",
    "symbol": "LTCUSDT",
    "httpPort": 3000,
    "wsPort": 3001,

    "mqtt": {
        "url": "wss://mqtt.cryptology.pe",
        "username": "orderflow",
        "password": "orderflow",
        "statsTopic": "orderflow/stats",
        "clientId": "orderflow-dashboard",
        "keepalive": 60,
        "connectTimeout": 4000,
        "reconnectPeriod": 1000
    },
    "alertWebhookUrl": "https://lima.cryptology.pe/api/webhook/OcdSY61opli9-n7unmlw4CmO",
    "alertCooldownMs": 300000,
    "maxStorageTime": 5400000,

    "standardZoneConfig": {
        "baseTicks": 5,
        "zoneMultipliers": [1, 2, 4],
        "timeWindows": [30000, 60000, 300000],
        "adaptiveMode": false,
        "volumeThresholds": {
            "aggressive": 20,
            "passive": 40,
            "institutional": 50
        },
        "priceThresholds": {
            "tickValue": 0.01,
            "minZoneWidth": 0.01,
            "maxZoneWidth": 0.2
        },
        "performanceConfig": {
            "maxZoneHistory": 1000,
            "cleanupInterval": 300000,
            "maxMemoryMB": 50
        }
    },

    "marketDataStorage": {
        "enabled": true,
        "dataDirectory": "./backtesting_data",
        "format": "csv",
        "maxFileSize": 25,
        "depthLevels": 20,
        "rotationHours": 3,
        "compressionEnabled": false,
        "monitoringInterval": 30
    },

    "zoneDetectors": {
        "LTCUSDT": {
            "accumulation": {
                "minZoneStrength": 0.8,
                "maxZoneWidth": 0.008,
                "minZoneVolume": 500,

                "maxActiveZones": 3,
                "zoneTimeoutMs": 600000,

                "completionThreshold": 0.9,
                "strengthChangeThreshold": 0.15,
                "minCandidateDuration": 300000,
                "minBuyRatio": 0.65,
                "maxPriceDeviation": 0.02,
                "minTradeCount": 15,

                "priceStabilityThreshold": 0.98,
                "strongZoneThreshold": 0.7,
                "weakZoneThreshold": 0.4,

                "volumeSurgeMultiplier": 3.0,
                "imbalanceThreshold": 0.35,
                "institutionalThreshold": 17.8,
                "burstDetectionMs": 1500,
                "sustainedVolumeMs": 25000,
                "medianTradeSize": 0.8,

                "pricePrecision": 2,
                "zoneTicks": 2,
                "enhancedInstitutionalSizeThreshold": 50,
                "enhancedIcebergDetectionWindow": 15,
                "enhancedMinInstitutionalRatio": 0.4,

                "invalidationPercentBelow": 0.005,
                "breakoutTargetPercentAbove": 0.02,
                "stopLossPercentBelow": 0.01,
                "takeProfitPercentAbove": 0.03,
                "completionBreakoutTargetPercent": 0.05,
                "completionStopLossPercent": 0.015,
                "completionConfidenceBoost": 0.2,

                "useStandardizedZones": true,
                "enhancementMode": "production",
                "standardizedZoneConfig": {
                    "minZoneConfluenceCount": 2,
                    "maxZoneConfluenceDistance": 3,
                    "institutionalVolumeThreshold": 50,
                    "passiveVolumeRatioThreshold": 1.5,
                    "enableZoneConfluenceFilter": true,
                    "enableInstitutionalVolumeFilter": false,
                    "enableCrossTimeframeAnalysis": false,
                    "confluenceConfidenceBoost": 0.1,
                    "institutionalVolumeBoost": 0.1,
                    "crossTimeframeBoost": 0.05
                },
                "minEnhancedConfidenceThreshold": 0.3,
                "enhancementSignificanceBoost": true
            },
            "distribution": {
                "minZoneStrength": 0.8,
                "maxZoneWidth": 0.014,
                "minZoneVolume": 1000,

                "maxActiveZones": 3,
                "zoneTimeoutMs": 1800000,

                "completionThreshold": 0.8,
                "strengthChangeThreshold": 0.18,
                "minCandidateDuration": 300000,
                "minSellRatio": 0.65,
                "maxPriceDeviation": 0.012,
                "minTradeCount": 10,

                "volumeSurgeMultiplier": 3.5,
                "imbalanceThreshold": 0.3,
                "institutionalThreshold": 15.0,
                "burstDetectionMs": 1500,
                "sustainedVolumeMs": 25000,
                "medianTradeSize": 0.8
            }
        }
    },

    "enhancedZoneFormation": {
        "icebergDetection": {
            "minSize": 10,
            "maxSize": 250,
            "priceStabilityTolerance": 0.025,
            "sizeConsistencyThreshold": 0.5,
            "sideDominanceThreshold": 0.6
        },
        "priceEfficiency": {
            "baseImpactRate": 0.0003,
            "maxVolumeMultiplier": 6,
            "minEfficiencyThreshold": 0.05
        },
        "institutional": {
            "minRatio": 0.25,
            "sizeThreshold": 40,
            "detectionWindow": 15
        },
        "detectorThresholds": {
            "accumulation": {
                "minScore": 0.9,
                "minAbsorptionRatio": 0.65,
                "maxAggressiveRatio": 0.3,
                "minPriceStability": 0.85,
                "minInstitutionalScore": 0.4
            },
            "distribution": {
                "minScore": 0.8,
                "minSellingRatio": 0.65,
                "maxSupportRatio": 0.3,
                "minPriceStability": 0.75,
                "minInstitutionalScore": 0.3
            }
        },
        "adaptiveThresholds": {
            "volatility": {
                "high": {
                    "accumulation": {
                        "minAbsorptionRatio": 0.6,
                        "maxAggressiveRatio": 0.4
                    },
                    "distribution": {
                        "minSellingRatio": 0.55,
                        "maxSupportRatio": 0.45
                    }
                },
                "medium": {
                    "accumulation": {
                        "minAbsorptionRatio": 0.55,
                        "maxAggressiveRatio": 0.5
                    },
                    "distribution": {
                        "minSellingRatio": 0.5,
                        "maxSupportRatio": 0.5
                    }
                },
                "low": {
                    "accumulation": {
                        "minAbsorptionRatio": 0.5,
                        "maxAggressiveRatio": 0.55
                    },
                    "distribution": {
                        "minSellingRatio": 0.45,
                        "maxSupportRatio": 0.55
                    }
                }
            }
        }
    },

    "symbols": {
        "LTCUSDT": {
            "pricePrecision": 2,
            "quantityPrecision": 8,

            "windowMs": 75000,
            "bandTicks": 5,
            "largeTradeThreshold": 100,
            "maxEventListeners": 50,
            "dashboardUpdateInterval": 500,
            "maxDashboardInterval": 1000,
            "significantChangeThreshold": 0.001,

            "orderBookState": {
                "binSize": 0.01,
                "numLevels": 150,
                "maxBufferSize": 100000
            },

            "tradesProcessor": {
                "maxBacklogRetries": 3,
                "backlogBatchSize": 500,
                "maxMemoryTrades": 20000,
                "saveQueueSize": 1000,
                "healthCheckInterval": 45000
            },

            "signalManager": {
                "confidenceThreshold": 0.3,
                "signalTimeout": 120000,
                "enableMarketHealthCheck": true,
                "enableAlerts": true,

                "detectorThresholds": {
                    "exhaustion": 0.45,
                    "cvd_confirmation": 0.4,
                    "distribution": 0.8,
                    "distribution_zone": 0.8,
                    "absorption": 0.85,
                    "accumulation": 0.95,
                    "accumulation_zone": 0.95
                },

                "positionSizing": {
                    "exhaustion": 1.0,
                    "cvd_confirmation": 0.7,
                    "distribution": 0.7,
                    "distribution_zone": 0.7,
                    "absorption": 0.5,
                    "accumulation": 0.0,
                    "accumulation_zone": 0.0
                }
            },
            "signalCoordinator": {
                "maxConcurrentProcessing": 20,
                "processingTimeoutMs": 5000,
                "retryAttempts": 2,
                "retryDelayMs": 1000,
                "enableMetrics": true,
                "logLevel": "info"
            },

            "exhaustion": {
                "minAggVolume": 20,
                "windowMs": 45000,
                "pricePrecision": 2,
                "zoneTicks": 3,
                "eventCooldownMs": 10000,
                "volumeSurgeMultiplier": 2.0,
                "imbalanceThreshold": 0.3,
                "institutionalThreshold": 15.0,
                "burstDetectionMs": 2000,
                "sustainedVolumeMs": 20000,
                "medianTradeSize": 0.8,
                "exhaustionThreshold": 0.3,
                "maxPassiveRatio": 0.35,
                "minDepletionFactor": 0.2,

                "imbalanceHighThreshold": 0.75,
                "imbalanceMediumThreshold": 0.55,
                "spreadHighThreshold": 0.004,
                "spreadMediumThreshold": 0.0015,

                "scoringWeights": {
                    "depletion": 0.45,
                    "passive": 0.3,
                    "continuity": 0.12,
                    "imbalance": 0.08,
                    "spread": 0.04,
                    "velocity": 0.01
                },
                "depletionThresholdRatio": 0.15,
                "significantChangeThreshold": 0.08,
                "highQualitySampleCount": 6,
                "highQualityDataAge": 35000,
                "mediumQualitySampleCount": 3,
                "mediumQualityDataAge": 70000,
                "circuitBreakerMaxErrors": 8,
                "circuitBreakerWindowMs": 90000,

                "lowScoreConfidenceAdjustment": 0.7,
                "lowVolumeConfidenceAdjustment": 0.8,
                "invalidSurgeConfidenceAdjustment": 0.8,
                "passiveConsistencyThreshold": 0.7,
                "imbalanceNeutralThreshold": 0.1,
                "velocityMinBound": 0.1,
                "velocityMaxBound": 10.0,

                "minInitialMoveTicks": 1,
                "confirmationTimeoutMs": 40000,
                "maxRevisitTicks": 8,
                "maxZones": 75,
                "zoneAgeLimit": 1200000,

                "features": {
                    "depletionTracking": true,
                    "spreadAdjustment": true,
                    "volumeVelocity": false,
                    "spoofingDetection": true,
                    "adaptiveZone": true,
                    "multiZone": false,
                    "passiveHistory": true
                }
            },

            "absorption": {
                "minAggVolume": 175,
                "windowMs": 60000,
                "pricePrecision": 2,
                "zoneTicks": 5,
                "eventCooldownMs": 15000,
                "minInitialMoveTicks": 4,
                "confirmationTimeoutMs": 60000,
                "maxRevisitTicks": 5,

                "absorptionThreshold": 0.6,
                "minPassiveMultiplier": 1.2,
                "maxAbsorptionRatio": 0.4,

                "strongAbsorptionRatio": 0.6,
                "moderateAbsorptionRatio": 0.8,
                "weakAbsorptionRatio": 1.0,

                "priceEfficiencyThreshold": 0.02,
                "spreadImpactThreshold": 0.003,
                "velocityIncreaseThreshold": 1.5,
                "significantChangeThreshold": 0.1,

                "dominantSideAnalysisWindowMs": 45000,
                "dominantSideFallbackTradeCount": 10,
                "dominantSideMinTradesRequired": 3,
                "dominantSideTemporalWeighting": true,
                "dominantSideWeightDecayFactor": 0.3,

                "features": {
                    "adaptiveZone": true,
                    "passiveHistory": true,
                    "multiZone": false,
                    "liquidityGradient": true,
                    "absorptionVelocity": true,
                    "layeredAbsorption": true,
                    "spreadImpact": true
                }
            },

            "icebergDetector": {
                "minRefillCount": 3,
                "maxSizeVariation": 0.2,
                "minTotalSize": 50,
                "maxRefillTimeMs": 30000,
                "priceStabilityTolerance": 0.005,
                "institutionalSizeThreshold": 10,
                "trackingWindowMs": 300000,
                "maxActiveIcebergs": 20,
                "maxStoredIcebergs": 100,
                "sizeRatioTolerance": 0.5,
                "maxSizeRatio": 2.0,
                "largeInstitutionalMultiplier": 2,
                "largeInstitutionalScoreBoost": 0.4,
                "mediumInstitutionalScoreBoost": 0.2,
                "highConsistencyPieceCount": 5,
                "highConsistencyScoreBoost": 0.3,
                "mediumConsistencyScoreBoost": 0.2,
                "longDurationThreshold": 60000,
                "mediumDurationThreshold": 30000,
                "longDurationScoreBoost": 0.3,
                "mediumDurationScoreBoost": 0.2,
                "pieceCountNormalizationFactor": 10,
                "totalSizeNormalizationMultiplier": 3,
                "sizeConsistencyWeight": 0.35,
                "priceStabilityWeight": 0.2,
                "institutionalScoreWeight": 0.2,
                "pieceCountWeight": 0.1,
                "totalSizeWeight": 0.1,
                "temporalScoreWeight": 0.05,
                "minConfidenceThreshold": 0.6
            },

            "spoofingDetector": {
                "tickSize": 0.01,
                "wallTicks": 10,
                "minWallSize": 20,
                "dynamicWallWidth": false,
                "testLogMinSpoof": 50,
                "maxCancellationRatio": 0.8,
                "rapidCancellationMs": 500,
                "algorithmicPatternThreshold": 0.9,
                "layeringDetectionLevels": 3,
                "ghostLiquidityThresholdMs": 200,
                "passiveHistoryCacheTTL": 300000,
                "orderPlacementCacheTTL": 300000,
                "cancellationPatternCacheTTL": 300000,
                "maxPlacementHistoryPerPrice": 20,
                "maxPassiveHistoryPerPrice": 10,
                "wallPullThresholdRatio": 0.6,
                "wallPullTimeThresholdMs": 1200,
                "canceledToExecutedRatio": 0.7,
                "bandOffsetDivisor": 2,
                "pricePrecisionDecimals": 8,
                "priceScalingFactor": 100000000,
                "minConfidenceScore": 0.95,
                "historyScanTimeWindowMs": 2000,
                "priceDeviationTickMultiplier": 2,
                "layeringMinCoordinatedLevels": 2,
                "layeringMaxConfidence": 0.9,
                "ghostLiquidityDisappearanceRatio": 0.85,
                "ghostLiquidityConfidence": 0.85,
                "highSignificanceThreshold": 0.8,
                "mediumSignificanceThreshold": 0.6,
                "spoofingDetectionWindowMs": 5000
            },

            "hiddenOrderDetector": {
                "minHiddenVolume": 10,
                "minTradeSize": 5,
                "priceTolerance": 0.0001,
                "maxDepthAgeMs": 1000,
                "minConfidence": 0.8,
                "zoneHeightPercentage": 0.002
            },

            "deltaCvdConfirmation": {
                "windowsSec": [60, 300],
                "minZ": 0.6,
                "priceCorrelationWeight": 0.3,
                "volumeConcentrationWeight": 0.2,
                "adaptiveThresholdMultiplier": 1.0,
                "eventCooldownMs": 15000,
                "maxZones": 50,
                "zoneAgeLimit": 1800000,

                "minTradesPerSec": 0.1,
                "minVolPerSec": 0.5,
                "minSamplesForStats": 15,
                "pricePrecision": 2,

                "volatilityLookbackSec": 3600,
                "maxDivergenceAllowed": 0.5,
                "stateCleanupIntervalSec": 300,

                "dynamicThresholds": true,
                "logDebug": true,

                "volumeSurgeMultiplier": 2.5,
                "imbalanceThreshold": 0.15,
                "institutionalThreshold": 17.8,
                "burstDetectionMs": 1000,
                "sustainedVolumeMs": 30000,
                "medianTradeSize": 0.6,

                "detectionMode": "momentum",
                "divergenceThreshold": 0.3,
                "divergenceLookbackSec": 60,

                "enableDepthAnalysis": false,
                "usePassiveVolume": false,
                "maxOrderbookAge": 5000,

                "absorptionCVDThreshold": 75,
                "absorptionPriceThreshold": 0.1,

                "imbalanceWeight": 0.2,

                "icebergMinRefills": 3,
                "icebergMinSize": 20,

                "baseConfidenceRequired": 0.2,
                "finalConfidenceRequired": 0.35,

                "strongCorrelationThreshold": 0.7,
                "weakCorrelationThreshold": 0.3,
                "depthImbalanceThreshold": 0.2
            }
        }
    }
}
